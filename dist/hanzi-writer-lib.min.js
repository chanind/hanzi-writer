/*! Hanzi Writer v0.6.0 | https://chanind.github.io/hanzi-writer */
module.exports=function(t){var i={};function n(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=i,n.d=function(t,i,r){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=5)}([function(t,i,n){"use strict";(function(i){function n(t){return Math.max.apply(null,t)}function r(t){return Math.min.apply(null,t)}var s=0;t.exports={inherits:function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},assign:function(t){for(var i=Object(t),n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(function(t){if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}),i},arrayMax:n,arrayMin:r,average:function(t){return t.reduce(function(t,i){return i+t},0)/t.length},callIfExists:function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t&&t.apply(void 0,n)},counter:function(){return s+=1},emptyFunc:function(){},getExtremes:function(t){var i=n(t),s=r(t);return[i,(i+s)/2,s]},isMSBrowser:function(){return i.navigator&&i.navigator.userAgent&&(i.navigator.userAgent.indexOf("Edge")>=0||i.navigator.userAgent.indexOf("MSIE")>=0)},timeout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(i,n){setTimeout(i,t)})}}}).call(i,n(2))},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,u=void 0;try{for(var h,o=t[Symbol.iterator]();!(r=(h=o.next()).done)&&(n.push(h.value),!i||n.length!==i);r=!0);}catch(t){s=!0,u=t}finally{try{!r&&o.return&&o.return()}finally{if(s)throw u}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(0),u=s.arrayMin,h=s.arrayMax;function o(t,i){this.x=parseFloat(t,10),this.y=parseFloat(i,10)}o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.getMagnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},o.prototype.equals=function(t){return!!t&&(t.x===this.x&&t.y===this.y)},o.getBounds=function(t){var i=t.map(function(t){return t.x}),n=t.map(function(t){return t.y}),r=h(i),s=h(n);return[new o(u(i),u(n)),new o(r,s)]},o.getOverallBounds=function(t){var i=[];return t.forEach(function(t){var n=t.getBounds(),s=r(n,2),u=s[0],h=s[1];i.push(u),i.push(h)}),o.getBounds(i)},o.getDistance=function(t,i){return t.subtract(i).getMagnitude()},o.cosineSimilarity=function(t,i){return(t.x*i.x+t.y*i.y)/t.getMagnitude()/i.getMagnitude()},t.exports=o},function(t,i){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){"use strict";function r(){this.isDestroyed=!1,this.childRenderers=[],this.parentRenderer=null}r.prototype.draw=function(){return this},r.prototype.registerChild=function(t){return this.childRenderers.push(t),t.setParent(this),t},r.prototype.setParent=function(t){return this.parentRenderer=t,this},r.prototype.setCanvas=function(t){return this.canvas=t,this},r.prototype.destroy=function(){this.isDestroyed=!0,this.childRenderers.forEach(function(t){return t.destroy()})},t.exports=r},function(t,i,n){"use strict";(function(i){var r=n(0).inherits,s=i.performance&&function(){return i.performance.now()}||function(){return Date.now()},u=i.requestAnimationFrame||function(t){return setTimeout(function(){return t(s())},1e3/60)},h=i.cancelAnimationFrame||clearTimeout;function o(t){return i.document.createElementNS("http://www.w3.org/2000/svg",t)}function e(t,i,n){t.setAttributeNS(null,i,n)}function c(t,i){Object.keys(i).forEach(function(n){return e(t,n,i[n])})}function f(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.r=t,this.u=i.duration||300,this.h=!1}function a(t,i,n){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a.super_.call(this,function(t){var i=(r.e-r.f)*t+r.f;r.a.style[r.v]=i},s),this.a=t,this.v=i,this.e=n,this.w=s.ensureEndStyle}function v(t,i){this.svg=t,this.defs=i}f.prototype.start=function(){var t=this;return this.h=!0,this.k=s(),this.g=0,this.S(),new Promise(function(i,n){t.M=i})},f.prototype.S=function(){var t=this;this.P=u(function(i){return t.b(i)})},f.prototype.b=function(t){if(this.h){var i=Math.min(1,(t-this.k)/this.u);if(i===this.g)return this.S();this.g=i;var n,r=(n=i,-Math.cos(n*Math.PI)/2+.5);this.r(r),1===i?(this.P=null,this.finish()):this.S()}},f.prototype.finish=function(){this.h&&(this.h=!1,this.P&&h(this.P),this.M&&(this.M(),this.M=null))},r(a,f),a.prototype.start=function(){return this.f=parseFloat(this.a.style[this.v],10),this.f===this.e?Promise.resolve():a.super_.prototype.start.call(this)},a.prototype.finish=function(){return this.h&&this.w&&(this.a.style[this.v]=this.e),a.super_.prototype.finish.call(this)},v.prototype.createSubCanvas=function(){var t=o("g");return this.svg.appendChild(t),new v(t,this.defs)},v.init=function(t){var n=void 0,r=t;"string"==typeof t&&(r=i.document.getElementById(t));var s=r.nodeName.toUpperCase();"SVG"===s||"G"===s?n=r:(n=o("svg"),r.appendChild(n)),c(n,{width:"100%",height:"100%"});var u=o("defs");return n.appendChild(u),new v(n,u)},v.prototype.remove=function(){this.svg.parentNode.removeChild(this.svg)},t.exports={createElm:o,attrs:c,attr:e,Canvas:v,Tween:f,StyleTween:a,getPathString:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0],r=t.slice(1),s="M "+n.x+" "+n.y;return r.forEach(function(t){s+=" L "+t.x+" "+t.y}),i&&(s+="Z"),s}}}).call(i,n(2))},function(t,i,n){"use strict";(function(i){var r=n(6),s=n(9),u=n(1),h=n(10),o=n(13),e=n(14),c=n(4),f=n(18),a=n(19),v=n(21),l=n(0),d=l.assign,w=l.isMSBrowser,k=l.timeout,m={charDataLoader:f,onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,width:null,height:null,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",showHintAfterMisses:3,highlightOnComplete:!0,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2,usePolygonMasks:w()};function g(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.C=new a,this.F=c.Canvas.init(t),this.setOptions(n),this.O=new v(this.j),this.setCharacter(i),this.D(),this.A=null}if(g.prototype.setOptions=function(t){var i,n;this.j=(n=d({},m,i=t),i.strokeAnimationDuration&&!i.strokeAnimationSpeed&&(n.strokeAnimationSpeed=500/n.strokeAnimationDuration),i.strokeHighlightDuration&&!i.strokeHighlightSpeed&&(n.strokeHighlightSpeed=500/n.strokeHighlightDuration),n),this.T={strokeColor:this.j.strokeColor,radicalColor:this.j.radicalColor,strokeWidth:this.j.strokeWidth,strokeAnimationSpeed:this.j.strokeAnimationSpeed,strokeFadeDuration:this.j.strokeFadeDuration,delayBetweenStrokes:this.j.delayBetweenStrokes,usePolygonMasks:this.j.usePolygonMasks},this.L=d({},this.T,{strokeColor:this.j.outlineColor,radicalColor:null,strokeWidth:this.j.outlineWidth}),this.U=d({},this.T,{strokeColor:this.j.highlightColor,radicalColor:null,strokeAnimationSpeed:this.j.strokeHighlightSpeed}),this.W={strokeColor:this.j.drawingColor,strokeWidth:this.j.drawingWidth,fadeDuration:this.j.drawingFadeDuration}},g.prototype.showCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.I(function(i){return t.B.show(i)},i)},g.prototype.hideCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.I(function(i){return t.B.hide(i)},i)},g.prototype.animateCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.I(function(i){return t.B.animate(i)},i)},g.prototype.loopCharacterAnimation=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.I(function n(r){if(!r.isActive())return null;var s=d({},t.j,i).delayBetweenLoops,u=t.B.animate(r);return u?u.then(function(){return k(s)}).then(function(){return n(r)}):null},i)},g.prototype.showOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.I(function(i){return t.R.show(i)},i)},g.prototype.hideOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.I(function(i){return t.R.hide(i)},i)},g.prototype.quiz=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.G(function(){t.cancelQuiz(),t.A=new e({canvas:t.H,animator:t.C,character:t.N,characterRenderer:t.B,highlightRenderer:t.z,quizOptions:d({},t.j,i),userStrokeOptions:t.W})})},g.prototype.cancelQuiz=function(){this.A&&this.A.cancel(),this.A=null},g.prototype.setCharacter=function(t){var i=this;return this.cancelQuiz(),this.q=t,this.C.cancel(),this.J&&this.J.destroy(),this.B&&this.B.destroy(),this.R&&this.R.destroy(),this.z&&this.z.destroy(),this.J=null,this.B=null,this.R=null,this.z=null,this.V=this.O.loadCharData(t).then(function(n){if(!i.O.loadingFailed){var u=new h;i.N=u.generateCharacter(t,n),i.Z=new o(i.N,i.K(i.j)),i.J=new s(i.Z).setCanvas(i.F),i.H=i.J.positionedCanvas,i.R=new r(i.N,i.L).setCanvas(i.H).draw(),i.B=new r(i.N,i.T).setCanvas(i.H).draw(),i.z=new r(i.N,i.U).setCanvas(i.H).draw(),i.j.showCharacter&&i.B.showImmediate(),i.j.showOutline&&i.R.showImmediate()}}),this.V},g.prototype.K=function(t){var i=d({},t);if(i.width&&!i.height)i.height=i.width;else if(i.height&&!i.width)i.width=i.height;else if(!i.width&&!i.height){var n=this.F.svg.getBoundingClientRect(),r=n.width,s=n.height,u=Math.min(r,s);i.width=u,i.height=u}return i},g.prototype.G=function(t){var i=this;return this.O.loadingFailed?(this.setCharacter(this.q),Promise.resolve().then(function(){if(!i.O.loadingFailed)return i.G(t)})):this.V.then(function(){if(!i.O.loadingFailed)return t()})},g.prototype.D=function(){var t=this;this.F.svg.addEventListener("mousedown",function(i){!t.isLoadingCharData&&t.A&&(i.preventDefault(),t.Q("startUserStroke",t.X(i)))}),this.F.svg.addEventListener("touchstart",function(i){!t.isLoadingCharData&&t.A&&(i.preventDefault(),t.Q("startUserStroke",t.Y(i)))}),this.F.svg.addEventListener("mousemove",function(i){!t.isLoadingCharData&&t.A&&(i.preventDefault(),t.Q("continueUserStroke",t.X(i)))}),this.F.svg.addEventListener("touchmove",function(i){!t.isLoadingCharData&&t.A&&(i.preventDefault(),t.Q("continueUserStroke",t.Y(i)))}),i.document.addEventListener("mouseup",function(){return t.Q("endUserStroke")}),i.document.addEventListener("touchend",function(){return t.Q("endUserStroke")})},g.prototype.Q=function(t){var i;if(this.A){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(i=this.A)[t].apply(i,r)}},g.prototype.X=function(t){var i=this.F.svg.getBoundingClientRect();return this.Z.convertExternalPoint(new u(t.clientX-i.left,t.clientY-i.top))},g.prototype.Y=function(t){var i=this.F.svg.getBoundingClientRect(),n=t.touches[0].clientX-i.left,r=t.touches[0].clientY-i.top;return this.Z.convertExternalPoint(new u(n,r))},g.prototype.$=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.C.animate(t,i)},g.prototype.I=function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.G(function(){return i.$(t,n)})},void 0!==i.window){var y=i.window.HanziWriter;g.noConflict=function(){return i.window.HanziWriter=y,g},i.window.HanziWriter=g}t.exports=g}).call(i,n(2))},function(t,i,n){"use strict";var r=n(3),s=n(7),u=n(0),h=u.timeout;function o(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.super_.call(this),this.options=n,this.character=t,this.strokeRenderers=this.character.strokes.map(function(t){return i.registerChild(new s(t,n))})}(0,u.inherits)(o,r),o.prototype.getBounds=function(){return this.character.getBounds()},o.prototype.show=function(t){var i=this.strokeRenderers.map(function(i){return i.show(t)});return Promise.all(i)},o.prototype.showImmediate=function(){this.strokeRenderers.map(function(t){return t.showImmediate()})},o.prototype.hide=function(t){var i=this.strokeRenderers.map(function(i){return i.hide(t)});return Promise.all(i)},o.prototype.hideImmediate=function(){this.strokeRenderers.map(function(t){return t.hideImmediate()})},o.prototype.flash=function(t){var i=this;return this.show(t).then(function(){return i.hide(t)})},o.prototype.showStroke=function(t,i){return this.getStrokeRenderer(t).show(i)},o.prototype.draw=function(){return this.strokeRenderers.forEach(function(t){return t.draw()}),this},o.prototype.getStrokeRenderer=function(t){return this.strokeRenderers[t]},o.prototype.animate=function(t){var i=this;if(!t.isActive())return null;var n=this.hide(t);return this.strokeRenderers.forEach(function(r,s){s>0&&(n=n.then(function(){return h(i.options.delayBetweenStrokes)})),n=n.then(function(){return r.animate(t)})}),n},o.prototype.setCanvas=function(t){return o.super_.prototype.setCanvas.call(this,t),this.strokeRenderers.forEach(function(i){return i.setCanvas(t)}),this},t.exports=o},function(t,i,n){"use strict";var r=n(3),s=n(0),u=s.counter,h=s.inherits,o=n(4),e=n(8),c=e.extendPointOnLine,f=e.getLineSegmentsPortion,a=e.filterParallelPoints,v=e.linesToPolygon;function l(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.super_.call(this),this.stroke=t,this.options=i}h(l,r),l.prototype.draw=function(){this.path=o.createElm("path");var t=this.options.usePolygonMasks?"clipPath":"mask";this.mask=o.createElm(t),this.maskPath=o.createElm("path");var i="mask-"+u();o.attr(this.mask,"id",i),o.attr(this.path,"d",this.stroke.path),o.attrs(this.path,this.getStrokeAttrs()),this.path.style.opacity=0;var n=this.options.usePolygonMasks?"clip-path":"mask";return o.attr(this.path,n,"url(#"+i+")"),this.extendedMaskPoints=function(t,i){if(t.length<2)return t;var n=t[1],r=t[0],s=c(n,r,i),u=t.slice(1);return u.unshift(s),u}(a(this.stroke.points),100),this.options.usePolygonMasks?(this.extendedMaskPoints=function(t,i){if(t.length<2)return t;var n=t[t.length-2],r=t[t.length-1],s=c(n,r,i),u=t.slice(0,t.length-1);return u.push(s),u}(this.extendedMaskPoints,100),this.polyMaskTip=o.createElm("circle"),this.mask.appendChild(this.polyMaskTip),o.attr(this.polyMaskTip,"r",100),this._(1)):(o.attr(this.maskPath,"d",o.getPathString(this.extendedMaskPoints)),this.tt=this.maskPath.getTotalLength(),o.attrs(this.maskPath,{stroke:"#FFFFFF","stroke-width":200,fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":this.tt+","+this.tt}),this.maskPath.style["stroke-dashoffset"]=0),this.mask.appendChild(this.maskPath),this.canvas.defs.appendChild(this.mask),this.canvas.svg.appendChild(this.path),this},l.prototype._=function(t){var i=f(this.extendedMaskPoints,t),n=o.getPathString(v(i,200),!0),r=i[i.length-1];o.attr(this.maskPath,"d",n),o.attr(this.polyMaskTip,"cx",r.x),o.attr(this.polyMaskTip,"cy",r.y)},l.prototype.show=function(t){this.options.usePolygonMasks?this._(1):this.maskPath.style["stroke-dashoffset"]=0;var i=new o.StyleTween(this.path,"opacity",1,{duration:this.options.strokeFadeDuration,ensureEndStyle:!0});return t.registerSvgAnimation(i),i.start()},l.prototype.hide=function(t){var i=new o.StyleTween(this.path,"opacity",0,{duration:this.options.strokeFadeDuration,ensureEndStyle:!0});return t.registerSvgAnimation(i),i.start()},l.prototype.animate=function(t){var i=this;if(!t.isActive())return null;this.showImmediate();var n=(this.stroke.getLength()+600)/(3*this.options.strokeAnimationSpeed),r=void 0;return this.options.usePolygonMasks?(this._(0),r=new o.Tween(function(t){return i._(t)},{duration:n})):(this.maskPath.style["stroke-dashoffset"]=.999*this.tt,r=new o.StyleTween(this.maskPath,"stroke-dashoffset",0,{duration:n})),t.registerSvgAnimation(r),r.start()},l.prototype.hideImmediate=function(){this.path.style.opacity=0},l.prototype.showImmediate=function(){this.path.style.opacity=1},l.prototype.highlight=function(t){var i=this;return this.animate(t).then(function(){return i.hide(t)})},l.prototype.getColor=function(){var t=this.options.strokeColor;return this.options.radicalColor&&this.stroke.isInRadical&&(t=this.options.radicalColor),t},l.prototype.getStrokeAttrs=function(){return{fill:this.getColor(),stroke:this.getColor(),"stroke-width":this.options.strokeWidth}},l.prototype.destroy=function(){l.super_.prototype.destroy.call(this),this.path&&this.path.remove(),this.maskPath&&this.maskPath.remove(),this.mask&&this.mask.remove()},t.exports=l},function(t,i,n){"use strict";var r=n(1),s=function(t,i,n){var s=t.subtract(i),u=n/s.getMagnitude(),h=new r(u*s.y,-1*u*s.x);return[t.add(h),t.subtract(h)]},u=function(t,i,n,s){var u=t.x,h=i.x,o=n.x,e=s.x,c=t.y,f=i.y,a=n.y,v=s.y,l=(u-h)*(a-v)-(c-f)*(o-e);return new r(((u*f-c*h)*(o-e)-(u-h)*(o*v-a*e))/l,((u*f-c*h)*(a-v)-(c-f)*(o*v-a*e))/l)};t.exports={extendPointOnLine:function(t,i,n){var s=i.subtract(t),u=n/s.getMagnitude();return new r(i.x+u*s.x,i.y+u*s.y)},filterParallelPoints:function(t){if(t.length<3)return t;var i=[t[0],t[1]];return t.slice(2).forEach(function(t,n){var r=i.length,s=t.subtract(i[r-1]),u=i[r-1].subtract(i[r-2]);s.y*u.x-s.x*u.y==0&&i.pop(),i.push(t)}),i},getLineSegmentsPortion:function(t,i){if(t.length<2||i>=1)return t;if(0===i)return[t[0]];for(var n=0,s=1;s<t.length;s+=1)n+=r.getDistance(t[s],t[s-1]);for(var u=[t[0]],h=n*i,o=0,e=1;e<t.length;e+=1){var c=t[e-1],f=r.getDistance(t[e],c);if(o+f>=h){var a=t[e].subtract(c),v=(h-o)/f;return u.push(new r(c.x+v*a.x,c.y+v*a.y)),u}o+=f,u.push(t[e])}return u},getLinesIntersectPoint:u,getPerpendicularPointsAtDist:s,linesToPolygon:function(t,i){if(t.length<2)return t;for(var n=i/2,h=[],o=[],e=1;e<t.length;e+=1){var c=s(t[e-1],t[e],n),f=s(t[e],t[e-1],n);h.push({start:c[0],end:f[1]}),o.push({start:c[1],end:f[0]})}for(var a=[h[0].start],v=[o[0].start],l=1;l<h.length;l+=1){var d=u(h[l-1].start,h[l-1].end,h[l].start,h[l].end),w=u(o[l-1].start,o[l-1].end,o[l].start,o[l].end);a.push(d),v.push(w)}var k=h[h.length-1].end,m=o[o.length-1].end,g=u(a[a.length-1],v[v.length-1],k,m);if(r.getDistance(g,t[t.length-1])<n){var y=k.subtract(t[t.length-1]),p=g.subtract(t[t.length-1]);y.x*p.x+y.y*p.y>0?k=g:m=g}return a.push(k),v.push(m),v.reverse(),a.concat(v)}}},function(t,i,n){"use strict";var r=n(3),s=n(4);function u(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];u.super_.call(this),this.positioner=t,this.positionedCanvas=null}(0,n(0).inherits)(u,r),u.prototype.setCanvas=function(t){u.super_.prototype.setCanvas.call(this,t),this.positionedCanvas=t.createSubCanvas();var i=this.positionedCanvas.svg;return s.attr(i,"transform","\n    translate("+this.positioner.getXOffset()+", "+(this.positioner.getHeight()-this.positioner.getYOffset())+")\n    scale("+this.positioner.getScale()+", "+-1*this.positioner.getScale()+")\n  "),this},u.prototype.destroy=function(){u.super_.prototype.destroy.call(this),this.positionedCanvas.remove()},t.exports=u},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,u=void 0;try{for(var h,o=t[Symbol.iterator]();!(r=(h=o.next()).done)&&(n.push(h.value),!i||n.length!==i);r=!0);}catch(t){s=!0,u=t}finally{try{!r&&o.return&&o.return()}finally{if(s)throw u}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(1),u=n(11),h=n(12);function o(){}o.prototype.generateCharacter=function(t,i){var n=this.generateStrokes(i);return new h(t,n)},o.prototype.generateStrokes=function(t){return t.strokes.map(function(i,n){var h,o=t.medians[n].map(function(t){var i=r(t,2),n=i[0],u=i[1];return new s(n,u)});return new u(i,o,n,(h=n,t.radStrokes&&t.radStrokes.indexOf(h)>=0))})},t.exports=o},function(t,i,n){"use strict";var r=n(1);function s(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.path=t,this.points=i,this.strokeNum=n,this.isInRadical=r}s.prototype.getStrokeNum=function(){return this.strokeNum},s.prototype.getStartingPoint=function(){return this.points[0]},s.prototype.getEndingPoint=function(){return this.points[this.points.length-1]},s.prototype.getLength=function(){var t=this.points[0];return this.points.slice(1).reduce(function(i,n){var s=r.getDistance(n,t);return t=n,i+s},0)},s.prototype.getVectors=function(){var t=this.points[0];return this.points.slice(1).map(function(i){var n=i.subtract(t);return t=i,n})},s.prototype.getDistance=function(t){var i=this.points.map(function(i){return r.getDistance(i,t)});return Math.min.apply(Math,i)},s.prototype.getAverageDistance=function(t){var i=this;return t.reduce(function(t,n){return t+i.getDistance(n)},0)/t.length},t.exports=s},function(t,i,n){"use strict";var r=n(1);function s(t,i){this.symbol=t,this.strokes=i}s.prototype.getStroke=function(t){return this.strokes[t]},s.prototype.getNumStrokes=function(){return this.strokes.length},s.prototype.getBounds=function(){return r.getBounds([new r(0,900),new r(1024,-124)])},t.exports=s},function(t,i,n){"use strict";var r=n(1);function s(t,i){this.N=t,this.j=i,this.it()}s.prototype.convertExternalPoint=function(t){var i=(t.x-this.nt)/this.rt,n=(this.getHeight()-this.st-t.y)/this.rt;return new r(i,n)},s.prototype.getXOffset=function(){return this.nt},s.prototype.getYOffset=function(){return this.st},s.prototype.getScale=function(){return this.rt},s.prototype.getHeight=function(){return this.j.height},s.prototype.it=function(){var t=this.N.getBounds(),i=t[1].x-t[0].x,n=t[1].y-t[0].y,r=this.j.width-2*this.j.padding,s=this.j.height-2*this.j.padding,u=r/i,h=s/n;this.rt=Math.min(u,h);var o=this.j.padding+(r-this.rt*i)/2,e=this.j.padding+(s-this.rt*n)/2;this.nt=-1*t[0].x*this.rt+o,this.st=-1*t[0].y*this.rt+e},t.exports=s},function(t,i,n){"use strict";var r=n(15),s=n(16),u=n(17),h=n(0).callIfExists;function o(t){var i=t.canvas,n=t.animator,s=t.character,u=t.characterRenderer,h=t.highlightRenderer,o=t.quizOptions,e=t.userStrokeOptions;this.F=i,this.C=n,this.N=s,this.B=u,this.z=h,this.ut=o,this.W=e,this.ht=0,this.ot=0,this.et=0,this.ct=[],this.h=!0,this.ft=new r,this.at()}o.prototype.startUserStroke=function(t){return this.h?this.vt?this.endUserStroke():(this.vt=new s(t),this.lt=new u(this.vt,this.W),void this.lt.setCanvas(this.F).draw()):null},o.prototype.continueUserStroke=function(t){this.vt&&(this.vt.appendPoint(t),this.lt.updatePath())},o.prototype.endUserStroke=function(){var t=this;if(!this.vt)return Promise.resolve();this.C.animate(function(i){if(!t.h)return Promise.resolve();var n=[],r=t.dt(),s=t.ft.strokeMatches(t.vt,r);return n.push(t.lt.fadeAndRemove(i)),t.vt=null,t.lt=null,s?n.push(t.wt(r,i)):(t.kt(),t.ot>=t.ut.showHintAfterMisses&&n.push(t.mt(i))),Promise.all(n)})},o.prototype.cancel=function(){this.h=!1},o.prototype.wt=function(t,i){var n=this;h(this.ut.onCorrectStroke,{character:this.N.symbol,strokeNum:this.ht,mistakesOnStroke:this.ot,totalMistakes:this.et,strokesRemaining:this.N.getNumStrokes()-this.ht-1}),this.ht+=1,this.ot=0;var r=this.gt(t,i);return this.ht===this.N.getNumStrokes()&&(this.h=!1,h(this.ut.onComplete,{character:this.N.symbol,totalMistakes:this.et}),this.ut.highlightOnComplete&&(r=r.then(function(){return n.z.flash(i)}))),r},o.prototype.kt=function(){this.ot+=1,this.et+=1,h(this.ut.onMistake,{character:this.N.symbol,strokeNum:this.ht,mistakesOnStroke:this.ot,totalMistakes:this.et,strokesRemaining:this.N.getNumStrokes()-this.ht})},o.prototype.mt=function(t){return this.z.getStrokeRenderer(this.ht).highlight(t)},o.prototype.gt=function(t,i){return this.ct.push(t),this.B.showStroke(t.strokeNum,i)},o.prototype.dt=function(){return this.N.getStroke(this.ht)},o.prototype.at=function(){var t=this;this.C.animate(function(i){return t.B.hide(i)})},t.exports=o},function(t,i,n){"use strict";var r=n(1),s=n(0).average;function u(){}u.prototype.strokeMatches=function(t,i){var n=this.yt(t.points);if(n.length<2)return null;var r=i.getAverageDistance(n)<300,s=this.pt(n,i),u=this.St(n,i);return r&&s&&u},u.prototype.pt=function(t,i){var n=r.getDistance(i.getStartingPoint(),t[0]),s=r.getDistance(i.getEndingPoint(),t[t.length-1]);return n<250&&s<250},u.prototype.St=function(t,i){var n=this.Mt(t),u=i.getVectors(),h=n.map(function(t){var i=u.map(function(i){return r.cosineSimilarity(i,t)});return Math.max.apply(Math,i)});return s(h)>0},u.prototype.yt=function(t){if(t.length<2)return t;var i=[t[0]];return t.slice(1).forEach(function(t){t.equals(i[i.length-1])||i.push(t)}),i},u.prototype.Pt=function(t){var i=0,n=t[0];return t.forEach(function(t){i+=r.getDistance(t,n),n=t}),i},u.prototype.Mt=function(t){var i=[],n=t[0];return t.slice(1).forEach(function(t){i.push(t.subtract(n)),n=t}),i},t.exports=u},function(t,i,n){"use strict";var r=n(1);function s(t){this.points=[t]}s.prototype.getBounds=function(){return r.getBounds(this.points)},s.prototype.appendPoint=function(t){this.points.push(t)},t.exports=s},function(t,i,n){"use strict";var r=n(3),s=n(0).inherits,u=n(4);function h(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.super_.call(this),this.options=i,this.userStroke=t}s(h,r),h.prototype.getPathString=function(){return u.getPathString(this.userStroke.points)},h.prototype.updatePath=function(){u.attr(this.path,"d",this.getPathString())},h.prototype.draw=function(){return h.super_.prototype.draw.call(this),this.path=u.createElm("path"),u.attrs(this.path,this.getStrokeAttrs()),this.path.style.opacity=1,this.updatePath(),this.canvas.svg.appendChild(this.path),this},h.prototype.fadeAndRemove=function(t){var i=this,n=new u.StyleTween(this.path,"opacity",0,{duration:this.options.fadeDuration});return t.registerSvgAnimation(n),n.start().then(function(){return i.destroy()})},h.prototype.getStrokeAttrs=function(){return{fill:"none",stroke:this.options.strokeColor,"stroke-width":this.options.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"}},h.prototype.destroy=function(){h.super_.prototype.destroy.call(this),this.path&&this.path.remove()},t.exports=h},function(t,i,n){"use strict";(function(i){t.exports=function(t,n,r){var s=new i.XMLHttpRequest;s.overrideMimeType&&s.overrideMimeType("application/json"),s.open("GET","https://cdn.jsdelivr.net/npm/hanzi-writer-data@1/"+t+".json",!0),s.onerror=function(t){r(s,t)},s.onreadystatechange=function(){4===s.readyState&&(200===s.status?n(JSON.parse(s.responseText)):r&&r(s))},s.send(null)}}).call(i,n(2))},function(t,i,n){"use strict";var r=n(20);function s(){this.bt=null}s.prototype.animate=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.Ct(i);return t(n).then(function(){return n.finish()})},s.prototype.Ct=function(t){return this.cancel(),this.bt=new r(t),this.bt},s.prototype.cancel=function(){this.bt&&this.bt.cancel()},t.exports=s},function(t,i,n){"use strict";var r=n(0).callIfExists;function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.Ft=[],this.h=!0,this.Ot=t.onComplete}s.prototype.cancel=function(){this.isActive()&&(this.h=!1,this.Ft.forEach(function(t){return t.finish()}))},s.prototype.registerSvgAnimation=function(t){-1===this.Ft.indexOf(t)&&this.Ft.push(t)},s.prototype.isActive=function(){return this.h},s.prototype.finish=function(){this.isActive()&&(this.h=!1,r(this.Ot))},t.exports=s},function(t,i,n){"use strict";var r=n(0).callIfExists;function s(t){this.jt=0,this.j=t,this.Dt=!1,this.Et=null,this.loadingFailed=!1}s.prototype.At=function(t,i){var n=this,r=function(t){i===n.jt&&n.M(t)},s=this.j.charDataLoader(t,r,function(t){i===n.jt&&n.Tt(t)});s&&r(s)},s.prototype.Lt=function(){var t=this;this.Et=new Promise(function(i,n){t.M=i,t.Tt=n}).then(function(i){return t.Dt=!1,r(t.j.onLoadCharDataSuccess,i),i},function(i){if(t.Dt=!1,t.loadingFailed=!0,r(t.j.onLoadCharDataError,i),!t.j.onLoadCharDataError){if(i instanceof Error)throw i;var n=new Error("Failed to load char data for "+t.xt);throw n.reason=i,n}})},s.prototype.loadCharData=function(t){return this.xt=t,this.Dt||this.Lt(),this.loadingFailed=!1,this.Dt=!0,this.jt+=1,this.At(t,this.jt),this.Et},t.exports=s}]);