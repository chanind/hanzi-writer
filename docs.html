---
layout: default
js: docs.js
---

<div class="container docs">
  <div class="row">
    <div class="col-sm-3">
      <div class="toc" id="toc" data-spy="affix" data-offset-top="95" data-offset-bottom="155">
        <ul class="nav">
          <li>
            <a href="#installation-link">
              Installation
            </a>
            <ul class="nav">
              <li>
                <a href="#script-loading-link">via script tag</a>
              </li>
              <li>
                <a href="#npm-loading-link">via npm</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#basic-usage-link">Basic usage</a>
            <ul class="nav">
              <li>
                <a href="#rendering-link">Rendering</a>
              </li>
              <li>
                <a href="#animation-link">Animation</a>
              </li>
              <li>
                <a href="#looping-animation-link">Looping animations</a>
              </li>
              <li>
                <a href="#chaining-animation-link">Chaining animation</a>
              </li>
              <li>
                <a href="#quizzing-link">Quizzing</a>
              </li>
              <li>
                <a href="#integrating-quizzes-link">Integrating quizzes</a>
              </li>
              <li>
                <a href="#other-methods-link">Other methods</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#advanced-usage-link">Advanced usage</a>
            <ul class="nav">
              <li>
                <a href="#loading-character-data-link">Loading character data</a>
              </li>
              <li>
                <a href="#raw-character-svg">Raw character SVG</a>
              </li>
              <li>
                <a href="#custom-backgrounds">Custom backgrounds</a>
              </li>
              <li>
                <a href="#wechat-miniprograms">Wechat / 微信小程序</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#api-link">API</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-sm-9 content">
      <h1 id="installation-link">Installation</h1>
      <h2 id="script-loading-link">Loading Hanzi Writer in a script tag</h2>
      <p>
        The simplest option is to load the Hanzi Writer JS directly from the jsdelivr CDN. Just put the following in the head of your webpage:
        {% highlight html %}
<script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.2/dist/hanzi-writer.min.js"></script>
        {% endhighlight %}
      </p>
      <p>
        You can also download a copy of the Hanzi Writer javascript here:<br />
        <strong><a href="https://cdn.jsdelivr.net/npm/hanzi-writer/dist/hanzi-writer.min.js">hanzi-writer.min.js</a></strong> - minified for production (30 kb, 9kb gzipped)<br />
        <strong><a href="https://cdn.jsdelivr.net/npm/hanzi-writer/dist/hanzi-writer.js">hanzi-writer.js</a></strong> - unminified for development (70 kb)<br />
      </p>
      <p>
        The above scripts will make a global <code>HanziWriter</code> variable available after the script loads.
      </p>
      <h2 id="npm-loading-link">Loading Hanzi Writer via npm</h2>
      <p>
        If you want to include Hanzi Writer in webpack or node.js, you can install from npm: <code>npm install hanzi-writer</code>. Then, you can include Hanzi Writer in your code via:
        {% highlight javascript %}
const HanziWriter = require('hanzi-writer');
        {% endhighlight %}
      </p>
      <br /><br />
      <div class="panel panel-warning">
        <div class="panel-heading">Note: working with old browsers</div>
        <div class="panel-body">
          If you want to use Hanzi Writer with old versions of internet explorer (10 and 11) you'll need to
          provide a polyfill for the Promise api. An easy way to do that is by using polyfill.io.
          Add the following to your webpage before loading Hanzi Writer:
          <br /><br />
          {% highlight html %}
<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
          {% endhighlight %}
        </div>
      </div>

      <h1 id="basic-usage-link">Basic usage</h1>
      <h2 id="rendering-link">Rendering to the screen</h2>
      <p>
        Creating a new <code>HanziWriter</code> instance requires passing in a target div (either ID or DOM reference),
        the character you'd like to render, and configuration options. A simple example is illustrated below.
        Assuming in HTML you have:
      </p>
      {% highlight html %}
<div id="character-target-div"></div>
      {% endhighlight %}
      <p>Then, in Javascript:</p>
      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '我', {
  width: 100,
  height: 100,
  padding: 5
});
      {% endhighlight %}

      <p>You can see the result of this below:</p>
      <div id="docs-target-1" class="inline-demo"></div>
      <script>
        (function() {
          HanziWriter.create('docs-target-1', '我', {
            width: 100,
            height: 100,
            padding: 5
          });
        })();
      </script>
      <p>
        In the above example width and height are the size of the box containing the character in pixels, and padding is the space between the character and the edge of the box, also in pixels. You can configure other options as well, like the color of the character. Below is an example drawn with different sizing and colors:
      <p>

      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '爽', {
  width: 150,
  height: 150,
  padding: 20,
  strokeColor: '#EE00FF' // pink
});
      {% endhighlight %}

      <div id="docs-target-2" class="inline-demo medium-demo"></div>
      <script>
        (function() {
          HanziWriter.create('docs-target-2', '爽', {
            width: 150,
            height: 150,
            padding: 20,
            strokeColor: '#EE00FF' // pink
          });
        })();
      </script>

      <p>
        Hanzi Writer also supports coloring the radical of a character differently. You set the color to display the radical with the <code>radicalColor</code> option. Below is an example of the word 草 with the radical colored green.
      </p>

      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '草', {
  width: 150,
  height: 150,
  padding: 5,
  radicalColor: '#168F16' // green
});
      {% endhighlight %}

      <div id="docs-target-2-1" class="inline-demo medium-demo"></div>
      <script>
        (function() {
          HanziWriter.create('docs-target-2-1', '草', {
            width: 150,
            height: 150,
            padding: 5,
            radicalColor: '#168F16' // green
          });
        })();
      </script>

      <h2 id="animation-link">Animation</h2>
      <p>After you create a HanziWriter instance you can animate it by calling the
      <code>animateCharacter()</code> method. In the example below, the character is animated when a button is pressed. the HTML looks like the following:</p>

      {% highlight html %}
<div id="character-target-div"></div>
<button id="animate-button">Animate</button>
      {% endhighlight %}

      <p>Then, the corresponding javascript:</p>
      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '国', {
  width: 100,
  height: 100,
  padding: 5,
  showOutline: true
});
document.getElementById('animate-button').addEventListener('click', function() {
  writer.animateCharacter();
});
      {% endhighlight %}

      <div id="docs-target-3" class="inline-demo"></div>
      <button class="btn btn-primary inline-demo-btn" id="docs-target-3-button" type="submit">Animate</button>
      <script>
          (function() {
            var writer = HanziWriter.create('docs-target-3', '国', {
              width: 100,
              height: 100,
              padding: 5,
              showOutline: true
            });
            document.getElementById('docs-target-3-button').addEventListener('click', function() {
              writer.animateCharacter();
            });
          })();
      </script>

      <p>There are also a number of options you can configure with animations to control things like the speed of the animation and whether or not the character outline is visible. You can also set a radical color if you'd like to show the character radical while animating. Below is another example of animating with different animation options:</p>

      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '激', {
  width: 100,
  height: 100,
  padding: 5,
  showOutline: false,
  strokeAnimationSpeed: 5, // 5x normal speed
  delayBetweenStrokes: 10, // milliseconds
  radicalColor: '#337ab7' // blue
});
document.getElementById('animate-button').addEventListener('click', function() {
  writer.animateCharacter();
});
      {% endhighlight %}
      <div id="docs-target-4" class="inline-demo"></div>
      <button class="btn btn-primary inline-demo-btn" id="docs-target-4-button" type="submit">Fast</button>
      <script>
        (function() {
          var writer = HanziWriter.create('docs-target-4', '激', {
            width: 100,
            height: 100,
            padding: 5,
            showOutline: false,
            strokeAnimationSpeed: 5, // 5x normal speed
            delayBetweenStrokes: 10, // milliseconds
            radicalColor: '#337ab7' // blue
          });
          document.getElementById('docs-target-4-button').addEventListener('click', function() {
            writer.animateCharacter();
          });
        })();
      </script>

      <h2 id="looping-animation-link">Looping Animations</h2>
      <p>
        It's common to repeat an animation over and over. You can call
        <code>loopCharacterAnimation()</code> to start and animation that will keep looping. There's a configuration option <code>delayBetweenLoops</code> you can use to control how much time there is between each animation loop (default 2000 ms). In the example below, the character will wait 3 seconds and then redraw itself forever:
      </p>
      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '轮', {
  width: 100,
  height: 100,
  padding: 5,
  delayBetweenLoops: 3000
});

writer.loopCharacterAnimation();
      {% endhighlight %}
      <div id="docs-target-5" class="inline-demo"></div>
      <script>
        (function() {
          var writer = HanziWriter.create('docs-target-5', '轮', {
            width: 100,
            height: 100,
            padding: 5,
            delayBetweenLoops: 3000
          });

          writer.loopCharacterAnimation();
        })();
      </script>

      <h2 id="chaining-animation-link">Chaining character animations</h2>
      <p>
        You can pass an onComplete callback when running
        <code>animateCharacter({ onComplete: function() { ... }})</code> that you can use to cause one character to start animating after another finishes. If you prefer to use promises instead, the <code>animateCharacter()</code> method will also return a promise which resolves when the animation is complete. Below is an example of 2 characters animating in order, one after another with 1 second between drawing each character. The example uses <code>onComplete</code> to trigger the next character to start after the first finishes. the HTML looks like:
      </p>
      {% highlight html %}
<div id="character-target-1"></div>
<div id="character-target-2"></div>
<button id="animate-button">Start</button>
      {% endhighlight %}
      <p>And the javascript:</p>
      {% highlight javascript %}
var char1 = HanziWriter.create('character-target-1', '很', {
  width: 100,
  height: 100,
  padding: 5,
  showCharacter: false
});
var char2 = HanziWriter.create('character-target-2', '爽', {
  width: 100,
  height: 100,
  padding: 5,
  showCharacter: false
});

function chainAnimations() {
  var delayBetweenAnimations = 1000; // milliseconds
  char1.hideCharacter();
  char2.hideCharacter();

  char1.animateCharacter({
    onComplete: function() {
      setTimeout(function() {
        char2.animateCharacter();
      }, delayBetweenAnimations);
    }
  });
}

document.getElementById('animate-button').addEventListener('click', chainAnimations);
      {% endhighlight %}
      <div class="inline-demo-flex">
        <div id="docs-target-6-1" class="inline-demo"></div>
        <div id="docs-target-6-2" class="inline-demo"></div>
      </div>
      <button class="btn btn-primary inline-demo-btn" id="docs-target-6-button" type="submit">Start</button>
      <script>
        (function() {
          var char1 = HanziWriter.create('docs-target-6-1', '很', {
            width: 100,
            height: 100,
            padding: 5,
            showCharacter: false
          });
          var char2 = HanziWriter.create('docs-target-6-2', '爽', {
            width: 100,
            height: 100,
            padding: 5,
            showCharacter: false

          });

          function chainAnimations() {
            var delayBetweenAnimations = 1000; // milliseconds
            char1.hideCharacter();
            char2.hideCharacter();

            char1.animateCharacter({
              onComplete: function() {
                setTimeout(function() {
                  char2.animateCharacter();
                }, delayBetweenAnimations);
              }
            });
          }

          document.getElementById('docs-target-6-button').addEventListener('click', chainAnimations);
        })();
      </script>

      <h2 id="quizzing-link">Quizzing</h2>

      <p>
        You can start a quiz by calling the <code>quiz()</code> method. We can set up a simple quiz with the code below:
      </p>
      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '测', {
  width: 150,
  height: 150,
  showCharacter: false,
  padding: 5
});
writer.quiz();
      {% endhighlight %}

      <div id="docs-target-7" class="inline-demo medium-demo"></div>
      <button id="docs-target-7-button" class="btn btn-primary inline-demo-btn">Reset</button>
      <script>
        (function() {
          var writer = HanziWriter.create('docs-target-7', '测', {
            width: 150,
            height: 150,
            showCharacter: false,
            padding: 5
          });
          writer.quiz();
          document.getElementById('docs-target-7-button').addEventListener('click', function() {
            writer.quiz();
          });
        })();
      </script>
      <p>
        Try drawing the character 测 above to get a feel for how quizzes work. If you miss a stroke 3 times it will give you a hint by highlighting the correct stroke. You can configure this behavior by setting the <code>showHintAfterMisses</code> option to a different number, or you can set <code>showHintAfterMisses: false</code> to disable it entirely. After a quiz is completed successfully it will flash briefly. You can disable this by setting <code>highlightOnComplete: false</code>. Below is an example with some of these options changed. The example below also sets <code>showOutline: false</code> to make it more challenging.
      </p>
      {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '鬼', {
  width: 150,
  height: 150,
  showCharacter: false,
  showOutline: false,
  showHintAfterMisses: 1,
  highlightOnComplete: false,
  padding: 5
});
writer.quiz();
      {% endhighlight %}

      <div id="docs-target-8" class="inline-demo medium-demo"></div>
      <button id="docs-target-8-button" class="btn btn-primary inline-demo-btn">Reset</button>
      <p>Try drawing the character 鬼 above.</p>
      <script>
        (function() {
          var writer = HanziWriter.create('docs-target-8', '鬼', {
            width: 150,
            height: 150,
            showCharacter: false,
            showOutline: false,
            showHintAfterMisses: 1,
            padding: 5
          });
          writer.quiz();
          document.getElementById('docs-target-8-button').addEventListener('click', function() {
            writer.quiz();
          });
        })();
      </script>

      <h2 id="integrating-quizzes-link">Integrating Quizzes</h2>
      <p>
        Quizzes on their own are good practice, but they become really poweful when they interact with the rest of your code. The <code>quiz()</code> method can be passed callbacks that you can use to run code when events happen in the quiz, like getting a stroke right or wrong, or the quiz finishing. The callbacks are called <code>onCorrectStroke</code>, <code>onMistake</code> and <code>onComplete</code>. These callbacks get passed an object containing info about the current state of the quiz. Below is an example of how you can integrate these callbacks:
        {% highlight javascript %}
var writer = HanziWriter.create('character-target-div', '码', {
  width: 150,
  height: 150,
  showCharacter: false,
  padding: 5
});
writer.quiz({
  onMistake: function(strokeData) {
    console.log('Oh no! you made a mistake on stroke ' + strokeData.strokeNum);
    console.log("You've made " + strokeData.mistakesOnStroke + " mistakes on this stroke so far");
    console.log("You've made " + strokeData.totalMistakes + " total mistakes on this quiz");
    console.log("There are " + strokeData.strokesRemaining + " strokes remaining in this character");
  },
  onCorrectStroke: function(strokeData) {
    console.log('Yes!!! You got stroke ' + strokeData.strokeNum + ' correct!');
    console.log('You made ' + strokeData.mistakesOnStroke + ' mistakes on this stroke');
    console.log("You've made " + strokeData.totalMistakes + ' total mistakes on this quiz');
    console.log('There are ' + strokeData.strokesRemaining + ' strokes remaining in this character');
  },
  onComplete: function(summaryData) {
    console.log('You did it! You finished drawing ' + summaryData.character);
    console.log('You made ' + summaryData.totalMistakes + ' total mistakes on this quiz');
  }
});
      {% endhighlight %}

      <div class="inline-demo-flex">
        <div id="docs-target-9" class="inline-demo medium-demo"></div>
        <div id="docs-target-9-console" class="inline-demo-console"></div>
      </div>
      <button id="docs-target-9-button" class="btn btn-primary inline-demo-btn">Reset</button>
      <script>
        (function() {
          var writer = HanziWriter.create('docs-target-9', '码', {
            width: 150,
            height: 150,
            showCharacter: false,
            padding: 5
          });

          var consoleLog = function(str) {
            var fakeConsole = document.getElementById('docs-target-9-console');
            fakeConsole.innerHTML += '<br />' + str;
            fakeConsole.scrollTop = fakeConsole.scrollHeight;
          }

          var opts = {
            onMistake: function(strokeData) {
              consoleLog('Oh no! you made a mistake on stroke ' + strokeData.strokeNum);
              consoleLog("You've made " + strokeData.mistakesOnStroke + " mistakes on this stroke so far");
              consoleLog("You've made " + strokeData.totalMistakes + " total mistakes on this quiz");
              consoleLog("There are " + strokeData.strokesRemaining + " strokes remaining in this character");
              consoleLog("");
            },
            onCorrectStroke: function(strokeData) {
              consoleLog('Yes!!! You got stroke ' + strokeData.strokeNum + ' correct!');
              consoleLog('You made ' + strokeData.mistakesOnStroke + ' mistakes on this stroke');
              consoleLog("You've made " + strokeData.totalMistakes + ' total mistakes on this quiz');
              consoleLog('There are ' + strokeData.strokesRemaining + ' strokes remaining in this character');
              consoleLog("");
            },
            onComplete: function(summaryData) {
              consoleLog('You did it! You finished drawing ' + summaryData.character);
              consoleLog('You made ' + summaryData.totalMistakes + ' total mistakes on this quiz');
              consoleLog("");
            }
          };
          writer.quiz(opts);
          document.getElementById('docs-target-9-button').addEventListener('click', function() {
            writer.quiz(opts);
          });
        })();
      </script>
      <p>Try drawing the character 码 above, and watch the output appear in the virtual console.</p>

      <h2 id="other-methods-link">Other methods</h2>

      <p>
        Aside from the core capability of animating and quizzing, there are several other methods available to control the rendering of a character.
      </p>
      <ul>
        <li>
          <code>writer.setCharacter(newCharacter)</code>
          Load a new character and rerender.
        </li>
        <li>
          <code>writer.showCharacter()</code>
          Show the character if it is currently hidden
        </li>
        <li>
          <code>writer.hideCharacter()</code>
          Hide the character if it is currently shown
        </li>
        <li>
          <code>writer.showOutline()</code>
          Show the character outline if it's currently hidden
        </li>
        <li>
          <code>writer.hideOutline()</code>
          Hide the character outline if it's currently shown
        </li>
        <li>
          <code>writer.updateColor(colorName, newValue)</code>
          Change the value of any color option. For example: <code>writer.updateColor('strokeColor', '#AA12CD')</code>
        </li>
        <li>
          <code>writer.cancelQuiz()</code>
          Immediately cancel the currently running quiz
        </li>
      </ul>

      <h1 id="advanced-usage-link">Advanced usage</h1>
      <h2 id="loading-character-data-link">Loading character data</h2>

      <p>
        Hanzi Writer needs to load stroke rendering data in order to draw characters. By default Hanzi Writer
        will load this data from the <a href="https://www.jsdelivr.com/package/npm/hanzi-writer-data">jsdelivr CDN</a> using ajax. This is probably fine for embedding Hanzi Writer into a website, but depending on how you're using Hanzi Writer there may be better ways to load character data. For example, if you're buidling a mobile app and want to embed Hanzi Writer into the app it's best to load character data locally so that character data is loaded instantly and without needing an internet connection.
      </p>
      <p>
        There is a sister repo called <a href="https://github.com/chanind/hanzi-writer-data">hanzi-writer-data</a> which contains the data for each individual character as a separate JSON file. You can host these files from your server and load them via AJAX inside of Hanzi Writer however you see fit. This data can also be loaded via NPM to include individual character data in your JS. Loading character data is way is accomplished via passing a custom closure to the <i>charDataLoader</i> option. An example is shown below using jQuery:
      </p>

      {% highlight javascript %}
var writer = HanziWriter.create('target', '我', {
  charDataLoader: function(char, onComplete) {
    $.getJSON("/my/server/" + char + ".json", function(charData) {
      onComplete(charData);
    });
  }
});
      {% endhighlight %}

      <p>
        The repo also contains all.json which contain all characters in 1 file, but these files are quite large (28mb) so they're probably not ideal for production use.
      </p>

      <p>
        If you know in advance which character you'd like to render you can hardcode just the data for that
        character into the <i>charDataLoader</i> closure. To do this, you can make use of the <a href="https://www.npmjs.com/package/hanzi-writer-data">hanzi-writer-data</a> NPM module and directly require character data inline. This technique ensures that Hanzi Writer will be able to render the character instantly without needing to wait for an AJAX request to complete. Below is an example of loading character data for the character <b>人</b> via the hanzi-writer-data NPM module. First, make sure the hanzi-writer-data module is installed by running:
        <code>npm install hanzi-writer-data</code>.
      <p>
        {% highlight javascript %}
var ren = require('hanzi-writer-data/人');

var writer = HanziWriter.create('target', '人', {
  charDataLoader: function() {
    return ren;
  }
});
      {% endhighlight %}
      </p>

      <p>
        If you would like to be notified when character data is loaded successfully or when it fails (for example to implement a loading spinner or show an error message), you can pass <code>onLoadCharDataSuccess</code> and <code>onLoadCharDataError</code> callbacks when creating a HanziWriter instance. For example:
      </p>

      {% highlight javascript %}
var ren = require('hanzi-writer-data/人');

var writer = HanziWriter.create('target', '人', {
  onLoadCharDataSuccess: function(data) {
    console.log('Success!');
  },
  onLoadCharDataError: function(reason) {
    console.log('Oh No! Something went wrong :(');
  }
});
      {% endhighlight %}

      <h2 id="raw-character-svg">Raw Character SVG</h2>
      <p>
        Sometimes you may want to render Hanzi writer character data but don't need stroke animations or stroke quizzes. Hanzi writer provides 2 static helper methods which make it easy to load and render raw character data.
      </p>
      <p>
        You can load character data from the Hanzi writer CDN using the static method <code>HanziWriter.loadCharacterData(character, options = {})</code>. This method will return a promise containing the loaded data for the character, but you can also pass <code>onLoadCharDataSuccess</code> and <code>onLoadCharDataError</code> callbacks as options if you prefer. The character data that's loaded will be the same as what's in the <a href="https://github.com/chanind/hanzi-writer-data/tree/master/data">hanzi-writer-data</a> repo, which are all parsed out from <a href="https://github.com/skishore/makemeahanzi">makemeahanzi</a>.
      </p>
      <p>
        The trickest part about rendering the SVG paths for Hanzi writer data is that the characters must be transformed to appear on the screen at the desired size, usually in a <code>&lt;g&gt;</code> tag. For example, to render the SVG for a character at size 128 x 128, the SVG would look something like this:
      </p>

      {% highlight html %}
<svg>
  <g transform="translate(0, 112.5) scale(0.125, -0.125)">
    <path d="...path from hanzi writer data..."></path>
    <path d="...path from hanzi writer data..."></path>
    <path d="...path from hanzi writer data..."></path>
    ...
  </g>
</svg>
      {% endhighlight %}

      <p>
        Fortunately, there's a static method <code>HanziWriter.getScalingTransform(width, height, padding = 0)</code> which makes this easy. This method returns transform data which you can use in SVG to draw the character at the specified size. Below is an example of loading data for the character <b>六</b> and rendering the character SVG at size 150 x 150 inside a div with ID <code>target</code>:
      </p>

      {% highlight javascript %}
HanziWriter.loadCharacterData('六').then(function(charData) {
  var target = document.getElementById('target');
  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
  svg.style.width = '150px';
  svg.style.height = '150px';
  target.appendChild(svg);
  var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

  // set the transform property on the g element so the character renders at 150x150
  var transformData = HanziWriter.getScalingTransform(150, 150);
  group.setAttributeNS(null, 'transform', transformData.transform);
  svg.appendChild(group);

  charData.strokes.forEach(function(strokePath) {
    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttributeNS(null, 'd', strokePath);
    // style the character paths
    path.style.fill = '#555';
    group.appendChild(path);
  });
});
      {% endhighlight %}

      <div id="docs-target-10" class="inline-demo medium-demo"></div>
      <script>
        (function() {
          HanziWriter.loadCharacterData('六').then(function(charData) {
            var target = document.getElementById('docs-target-10');
            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.style.width = '150px';
            svg.style.height = '150px';
            target.appendChild(svg);
            var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // set the transform property on the g element so the character renders at 150x150
            var transformData = HanziWriter.getScalingTransform(150, 150);
            group.setAttributeNS(null, 'transform', transformData.transform);
            svg.appendChild(group);

            charData.strokes.forEach(function(strokePath) {
              var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
              path.setAttributeNS(null, 'd', strokePath);
              // style the character paths
              path.style.fill = '#555';
              group.appendChild(path);
            });
          });
        })();
      </script>

      <p>
        Using raw character data gives you the full power of SVG to implement visualizations that don't require stroke animation or quizzing. For example, below is an example of using raw character data to implement a stroke fanning visualization of the character <b>是</b>:
      </p>

      {% highlight javascript %}
function renderFanningStrokes(target, strokes) {
  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
  svg.style.width = '75px';
  svg.style.height = '75px';
  svg.style.border = '1px solid #EEE'
  svg.style.marginRight = '3px'
  target.appendChild(svg);
  var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

  // set the transform property on the g element so the character renders at 75x75
  var transformData = HanziWriter.getScalingTransform(75, 75);
  group.setAttributeNS(null, 'transform', transformData.transform);
  svg.appendChild(group);

  strokes.forEach(function(strokePath) {
    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttributeNS(null, 'd', strokePath);
    // style the character paths
    path.style.fill = '#555';
    group.appendChild(path);
  });
}

HanziWriter.loadCharacterData('是').then(function(charData) {
  var target = document.getElementById('target');
  for (var i = 0; i < charData.strokes.length; i++) {
    var strokesPortion = charData.strokes.slice(0, i + 1);
    renderFanningStrokes(target, strokesPortion);
  }
});
      {% endhighlight %}

      <div id="docs-target-11" class="borderless-horiz-demo"></div>
      <script>
        (function() {
          function renderFanningStrokes(target, strokes) {
            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.style.width = '75px';
            svg.style.height = '75px';
            svg.style.border = '1px solid #EEE'
            svg.style.marginRight = '3px'
            target.appendChild(svg);
            var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // set the transform property on the g element so the character renders at 75x75
            var transformData = HanziWriter.getScalingTransform(75, 75);
            group.setAttributeNS(null, 'transform', transformData.transform);
            svg.appendChild(group);

            strokes.forEach(function(strokePath) {
              var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
              path.setAttributeNS(null, 'd', strokePath);
              // style the character paths
              path.style.fill = '#555';
              group.appendChild(path);
            });
          }

          HanziWriter.loadCharacterData('是').then(function(charData) {
            var target = document.getElementById('docs-target-11');
            for (var i = 0; i < charData.strokes.length; i++) {
              var strokesPortion = charData.strokes.slice(0, i + 1);
              renderFanningStrokes(target, strokesPortion);
            }
          });
        })();
      </script>

      <p>
        The examples above use raw javascript browser APIs for SVG rendering, but the code would be even simpler using a library to help manage SVG, like <a target="_blank" href="http://svgjs.com/">svg.js</a> or <a target="_blank" href="http://dmitrybaranovskiy.github.io/raphael/">raphael.js</a>.
      </p>

      <h1 id="custom-backgrounds">Custom backgrounds</h1>

      <p>
        If you already have an <code>&lt;SVG&gt;</code> or <code>&lt;G&gt;</code> element on the page, you can render a HanziWriter instance into that instead of using a DIV.
        This makes it easy to add custom backgrounds like a grid directly in SVG. For example, we can draw a simple grid in SVG like below:
      </p>

      {% highlight html %}
<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" id="grid-background-target">
  <line x1="0" y1="0" x2="100" y2="100" stroke="#DDD" />
  <line x1="100" y1="0" x2="0" y2="100" stroke="#DDD" />
  <line x1="50" y1="0" x2="50" y2="100" stroke="#DDD" />
  <line x1="0" y1="50" x2="100" y2="50" stroke="#DDD" />
</svg>
      {% endhighlight %}
      <div class="inline-demo">
        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">
          <line x1="0" y1="0" x2="100" y2="100" stroke="#DDD" />
          <line x1="100" y1="0" x2="0" y2="100" stroke="#DDD" />
          <line x1="50" y1="0" x2="50" y2="100" stroke="#DDD" />
          <line x1="0" y1="50" x2="100" y2="50" stroke="#DDD" />
        </svg>
      </div>

      <p>Then, we can render into this SVG by using its ID, just like we can with a normal div:</p>

      {% highlight javascript %}
var writer = HanziWriter.create('grid-background-target', '酷', {
  width: 100,
  height: 100,
  padding: 5,
});
      {% endhighlight %}
      <div class="inline-demo">
        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" id="docs-target-12">
          <line x1="0" y1="0" x2="100" y2="100" stroke="#DDD" />
          <line x1="100" y1="0" x2="0" y2="100" stroke="#DDD" />
          <line x1="50" y1="0" x2="50" y2="100" stroke="#DDD" />
          <line x1="0" y1="50" x2="100" y2="50" stroke="#DDD" />
        </svg>
      </div>

      <script>
        (function() {
          var writer = HanziWriter.create('docs-target-12', '酷', {
            width: 100,
            height: 100,
            padding: 5,
          });
        })()
      </script>

      <h1 id="wechat-miniprograms">Wechat miniprograms / 微信小程序</h1>

      <p>
        Hanzi Writer can be used inside of Wechat miniprograms via a <a href="https://github.com/chanind/hanzi-writer-miniprogram">miniprogram component plugin</a>.
        You can install this plugin using npm like below:
      </p>

      <code>npm install hanzi-writer-miniprogram</code>
      <p>
        In your page.json, first add the following to enable the hanzi-writer-view component:
      </p>

      {% highlight javascript %}
{
  "usingComponents": {
    "hanzi-writer-view": "hanzi-writer-miniprogram/hanzi-writer-view"
  }
}
      {% endhighlight %}

      <p>
        Then, add a <code>hanzi-writer-view</code> component to your page.
        You must add an <code>id</code>, <code>width</code>, and <code>height</code>, like below:
      </p>

      {% highlight html %}
<hanzi-writer-view id="hz-writer" width="300" height="300" />
      {% endhighlight %}

      <p>
        Then in your page, you can control the view via <code>createHanziWriterContext(options)</code>, like below:
      </p>

      {% highlight javascript %}
import createHanziWriterContext from 'hanzi-writer-miniprogram';

Page({
  onLoad: function() {
    this.writerCtx = createHanziWriterContext({
      id: 'hz-writer',
      character: '你',
      page: this,
    });

    // You can call any normal HanziWriter method here
    this.writerCtx.loopCharacterAnimation();
  }
});
      {% endhighlight %}

      <p>
        This method requires the id from the hanzi-writer-view component in wxml, and the current page.
      </p>
      <p>
        By default, character data is loaded from the hanzi-writer CDN, so you'll need to add <code>https://cdn.jsdelivr.net</code> to your
        <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/network.html"></a>list of approved domain names</a>.
        Otherwise, you can provide your own <code>charDataLoader</code> function and load character data however you like. 
        You can read more about <a href="#loading-character-data-link">loading character data here</a>.
      </p>
      <p>
        You can also pass any other normal Hanzi Writer options to <code>createHanziWriterContext</code>,
        except for <code>width</code> and <code>height</code> which are set in the <code>hanzi-writer-view</code> component. 
      </p>

      <h1 id="api-link">API</h1>

      <h2>HanziWriter</h2>
      <p>This is the core class you will interact with.</p>

      <h4>new HanziWriter(element, options)</h4>
      <p>Set up a new HanziWriter instance the specified DOM element</p>
      <p>
        <code>element</code> DOM node or ID of the element to render into.
      </p>
      <p>
        <code>options</code> object containing additional configuration options. Full options available include:
        <ul>
          <li><code>showOutline:</code> boolean, default true. Controls whether the outline is shown or hidden on the first render.</li>
          <li><code>showCharacter:</code> boolean, default true. Controls whether the character is shown or hidden on the first render.</li>
          <li><code>width:</code> number. Width of the canvas in px.</li>
          <li><code>height:</code> number. height of the canvas in px.</li>
          <li><code>padding:</code> number, default 20. padding between the character and edge of the canvas in px.</li>
          <li><code>strokeAnimationSpeed:</code> number, default 1. Speed at which to draw each stroke, must be greater than 0. Increase this number to draw strokes faster, decrease to draw strokes slower.</li>
          <li><code>strokeHighlightSpeed:</code> number, default 2. Speed at which to highlight each stroke when givings hints in a quiz, must be greater than 0. Increase this number to highlight faster, decrease to highlight slower.</li>
          <li><code>strokeFadeDuration:</code> number, default 400. Time in milliseconds to transition between showing and hiding strokes when calling <code>writer.show()</code> and <code>writer.hide()</code></li>
          <li><code>delayBetweenStrokes:</code> number, default 1000. Time in milliseconds between each stroke when animating.</li>
          <li><code>delayBetweenLoops:</code> number, default 2000. Time in milliseconds between each animation loop when looping animations.</li>
          <li><code>strokeColor:</code> hex string, default '#555'. The color to draw each stroke.</li>
          <li><code>radicalColor:</code> hex string, default null. The color to draw the radical in the stroke, if radical data is present. Radicals will be drawn the same color as other strokes if this is not set.</li>
          <li><code>highlightColor:</code> hex string, default '#AAF'. The color to use for highlighting in quizzes.</li>
          <li><code>outlineColor:</code> hex string, default '#DDD'. The color of the character outline.</li>
          <li><code>drawingColor:</code> hex string, default '#333'. The color of the lines drawn by users during quizzing.</li>
          <li><code>drawingWidth:</code> number, default 4. The width of the lines drawn by users during quizzing in px.</li>
          <li><code>showHintAfterMisses:</code> integer, default 3. The number of misses before a stroke highlight hint is given to the user. Set to false to disable. This can also be set when creating a quiz.</li>
          <li><code>highlightOnComplete:</code> boolean, default true. Controls whether a quiz briefly highlights the character when the user finishes drawing the whole character. This can also be set when creating a quiz.</li>
          <li><code>highlightCompleteColor:</code> hex string, default null. The color to use when highlighting the character on complete in quizzes. If not set, <code>highlightColor</code> will be used instead. Only relevant if <code>highlightOnComplete</code> is <code>true</code>.</li>
          <li><code>charDataLoader:</code> function. Custom function to load charater data. See the section on <a href="#loading-character-data-link">Loading character data</a> for more info on usage.</li>
          <li><code>onLoadCharDataSuccess:</code> function. Callback for when character data is loaded successfully. This function is called with the data that was loaded. This can be used to implement a loading spinner.</li>
          <li><code>onLoadCharDataError:</code> function. Callback for when character data loading fails. This function is passed whatever the failure reason is from <i>charDataLoader</i>.</li>
          <li><code>renderer:</code> string, default 'svg'. Set this to 'canvas' to render using a 2d canvas instead of SVG. May have better performance on some devices.</li>
        </ul>
      </p>
      <h3>Instance methods</h3>
      <h4>writer.showCharacter(options = {})</h4>
      <p>Show the character if it's currently hidden.</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the showing animation is complete.</li>
          <li><code>duration:</code> number, optional. How long the showing animation should take to complete. If not provided then <code>strokeFadeDuration</code> is used. Passing 0 will make the operation instant.</li>
        </ul>
      </p>

      <h4>writer.hideCharacter(options = {})</h4>
      <p>Hide the character if it's currently shown.</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the hiding animation is complete.</li>
          <li><code>duration:</code> number, optional. How long the hiding animation should take to complete. If not provided then <code>strokeFadeDuration</code> is used. Passing 0 will make the operation instant.</li>
        </ul>
      </p>

      <h4>writer.showOutline(options = {})</h4>
      <p>Show the outline if it's currently hidden.</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the showing animation is complete.</li>
          <li><code>duration:</code> number, optional. How long the showing animation should take to complete. If not provided then <code>strokeFadeDuration</code> is used. Passing 0 will make the operation instant.</li>
        </ul>
      </p>

      <h4>writer.hideOutline(options = {})</h4>
      <p>Hide the outline if it's currently shown.</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the hiding animation is complete.</li>
          <li><code>duration:</code> number, optional. How long the hiding animation should take to complete. If not provided then <code>strokeFadeDuration</code> is used. Passing 0 will make the operation instant.</li>
        </ul>
      </p>
      
      <h4>writer.updateDimensions(options = {})</h4>
      <p>Update the size of the writer instance</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>width:</code> number, optional, the new width in px</li>
          <li><code>height:</code> number, optional, the new height in px</li>
          <li><code>padding:</code> number, optional, the new padding in px</li>
        </ul>
      </p>

      <h4>writer.updateColor(colorName, colorVal, options = {})</h4>
      <p>Update a color setting.</p>
      <p>
        <code>colorName</code> string. One of 'strokeColor', 'radicalColor', 'outlineColor', 'highlightColor', or 'drawingColor'.
      </p>
      <p>
        <code>colorVal</code> string. A CSS color string like '#AA9913' or 'rgba(255, 255, 10, 0.7)'
      </p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the hiding animation is complete.</li>
          <li><code>duration:</code> number, optional. How long the animation should take to complete. If not provided then <code>strokeFadeDuration</code> is used. Passing 0 will make the operation instant.</li>
        </ul>
      </p>

      <h4>writer.animateCharacter(options = {})</h4>
      <p>Animate the strokes of the character in order</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the animation is complete.</li>
        </ul>
      </p>

      <h4>writer.animateStroke(strokeNum, options = {})</h4>
      <p>Animate a single stroke</p>
      <p>
        <code>strokeNum</code> number. The stroke number to animate, starting at 0.
      </p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the animation is complete.</li>
        </ul>
      </p>

      <h4>writer.highlightStroke(strokeNum, options = {})</h4>
      <p>Highlight a single stroke</p>
      <p>
        <code>strokeNum</code> number. The stroke number to highlight, starting at 0.
      </p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function. Called when the animation is complete.</li>
        </ul>
      </p>

      <h4>writer.loopCharacterAnimation()</h4>
      <p>Animate the strokes of the character in order, and then restart the animation after it finishes forever.</p>

      <h4>writer.pauseAnimation()</h4>
      <p>Pause any currently running animations.</p>

      <h4>writer.resumeAnimation()</h4>
      <p>Resume any animations that were previously paused with <code>pauseAnimation()</code>.</p>

      <h4>writer.setCharacter(character)</h4>
      <p>Replace the currently drawn character with a new one. This will reset any quizzes or animations in progress.</p>
      <p>
        <code>character</code> The character to draw, ex '你'.
      </p>

      <h4>writer.quiz(options)</h4>
      <p>Start a quiz.</p>
      <p>
        <code>options</code> object containing additional configuration options. Full options include:
        <ul>
          <li><code>onComplete:</code> function(data). Called when the quiz is complete. The function is called with an object containing <code>totalMistakes</code> which is the total mistakes made during the quiz.</li>
          <li>
            <code>onCorrectStroke:</code> function(data). Called when the user draws a stroke correctly. The function is called with an object containing:
            <ul>
              <li>
                <code>totalMistakes</code> the total mistakes made during the quiz so far.
              </li>
              <li>
                <code>strokeNum</code> the current stroke number.
              </li>
              <li>
                <code>mistakesOnStroke</code> the number of mistakes the user made drawing this stroke so far.
              </li>
              <li>
                <code>strokesRemaining</code> the number of strokes left until the quiz is complete.
              </li>
              <li>
                <code>drawnPath</code> an object containg the <code>pathString</code> drawn by the user and the <code>points</code> used for grading.
              </li>
            </ul>
          </li>
          <li>
            <code>onMistake:</code> function(data). Called when the user makes a mistake drawing a stroke. The function is called with an object containing:
            <ul>
              <li>
                <code>totalMistakes</code> the total mistakes made during the quiz so far.
              </li>
              <li>
                <code>strokeNum</code> the current stroke number.
              </li>
              <li>
                <code>mistakesOnStroke</code> the number of mistakes the user made drawing this stroke so far.
              </li>
              <li>
                <code>strokesRemaining</code> the number of strokes left until the quiz is complete.
              </li>
              <li>
                <code>drawnPath</code> an object containg the <code>pathString</code> drawn by the user and the <code>points</code> used for grading.
              </li>
            </ul>
          </li>
          <li><code>showHintAfterMisses:</code> integer, default 3. The number of misses before a stroke highlight hint is given to the user. Set to false to disable. This can also be set when creating the writer instance.</li>
          <li><code>leniency:</code> float, default 1.0. This can be set to make stroke grading more or less lenient. The closer this is to 0 the more strictly the quiz is graded.</li>
          <li><code>highlightOnComplete:</code> boolean, default true. Controls whether a quiz briefly highlights the character when the user finishes drawing the whole character. This can also be set when creating the writer instance.</li>
        </ul>
      </p>

      <h4>writer.cancelQuiz()</h4>
      <p>Cancel the quiz currently in progress</p>

      <h3>Class methods</h3>
      <h4>HanziWriter.create(element, character, options)</h4>
      <p>Set up a new HanziWriter instance the specified DOM element</p>
      <p>
        <code>element</code> DOM node or ID of the element to render into.
      </p>
      <p>
        <code>character</code> The character to draw, ex '你'.
      </p>
      <p>
        <code>options</code> object containing additional configuration options. Full options available include:
        <ul>
          <li><code>showOutline:</code> boolean, default true. Controls whether the outline is shown or hidden on the first render.</li>
          <li><code>showCharacter:</code> boolean, default true. Controls whether the character is shown or hidden on the first render.</li>
          <li><code>width:</code> number. Width of the canvas in px.</li>
          <li><code>height:</code> number. height of the canvas in px.</li>
          <li><code>padding:</code> number, default 20. padding between the character and edge of the canvas in px.</li>
          <li><code>strokeAnimationSpeed:</code> number, default 1. Speed at which to draw each stroke, must be greater than 0. Increase this number to draw strokes faster, decrease to draw strokes slower.</li>
          <li><code>strokeHighlightSpeed:</code> number, default 2. Speed at which to highlight each stroke when givings hints in a quiz, must be greater than 0. Increase this number to highlight faster, decrease to highlight slower.</li>
          <li><code>strokeFadeDuration:</code> number, default 400. Time in milliseconds to transition between showing and hiding strokes when calling <code>writer.show()</code> and <code>writer.hide()</code></li>
          <li><code>delayBetweenStrokes:</code> number, default 1000. Time in milliseconds between each stroke when animating.</li>
          <li><code>delayBetweenLoops:</code> number, default 2000. Time in milliseconds between each animation loop when looping animations.</li>
          <li><code>strokeColor:</code> hex string, default '#555'. The color to draw each stroke.</li>
          <li><code>radicalColor:</code> hex string, default null. The color to draw the radical in the stroke, if radical data is present. Radicals will be drawn the same color as other strokes if this is not set.</li>
          <li><code>highlightColor:</code> hex string, default '#AAF'. The color to use for highlighting in quizzes.</li>
          <li><code>outlineColor:</code> hex string, default '#DDD'. The color of the character outline.</li>
          <li><code>drawingColor:</code> hex string, default '#333'. The color of the lines drawn by users during quizzing.</li>
          <li><code>drawingWidth:</code> number, default 4. The width of the lines drawn by users during quizzing in px.</li>
          <li><code>showHintAfterMisses:</code> integer, default 3. The number of misses before a stroke highlight hint is given to the user. Set to false to disable. This can also be set when creating a quiz.</li>
          <li><code>highlightOnComplete:</code> boolean, default true. Controls whether a quiz briefly highlights the character when the user finishes drawing the whole character. This can also be set when creating a quiz.</li>
          <li><code>highlightCompleteColor:</code> hex string, default null. The color to use when highlighting the character on complete in quizzes. If not set, <code>highlightColor</code> will be used instead. Only relevant if <code>highlightOnComplete</code> is <code>true</code>.</li>
          <li><code>charDataLoader:</code> function. Custom function to load charater data. See the section on <a href="#loading-character-data-link">Loading character data</a> for more info on usage.</li>
          <li><code>onLoadCharDataSuccess:</code> function. Callback for when character data is loaded successfully. This function is called with the data that was loaded. This can be used to implement a loading spinner.</li>
          <li><code>onLoadCharDataError:</code> function. Callback for when character data loading fails. This function is passed whatever the failure reason is from <i>charDataLoader</i>.</li>
          <li><code>renderer:</code> string, default 'svg'. Set this to 'canvas' to render using a 2d canvas instead of SVG. May have better performance on some devices.</li>
        </ul>
      </p>
      <h4>HanziWriter.loadCharacterData(character, options = {})</h4>
      <p>
        Load raw character data from the Hanzi Writer CDN. Returns a promise which resolves when loading is complete.
      </p>
      <p>
        <code>character</code> The character to draw, ex '你'.
      </p>
      <p>
        <code>options</code> object containing additional configuration options. Full options available include:
        <ul>
          <li><code>charDataLoader:</code> function. Custom function to load charater data. See the section on <a href="#loading-character-data-link">Loading character data</a> for more info on usage.</li>
          <li><code>onLoadCharDataSuccess:</code> function. Callback for when character data is loaded successfully. This function is passed the data that was loaded</li>
          <li><code>onLoadCharDataError:</code> function. Callback for when character data loading fails. This function is passed whatever the failure reason is from <i>charDataLoader</i>.</li>
        </ul>
      </p>

      <h4>HanziWriter.getScalingTransform(width, height, padding = 0)</h4>
      <p>
        Return an object containing scaling info which can be used when rendering raw character data in SVG.
      </p>
      <p>
        <code>width</code> number, the width of the character to be rendered in px.
      </p>
      <p>
        <code>height</code> number, height of the character to be rendered in px.
      </p>
      <p>
        <code>padding</code> number, extra padding around the character. default 0.
      </p>
      <b>return value</b> object, containing the following keys:
      <ul>
        <li><code>x:</code> number. The x offset used in translate.</li>
        <li><code>y:</code> number. The y offset used in translate.</li>
        <li><code>scale:</code> number. The scale used in the scale part of the transform.</li>
        <li><code>transform:</code> string. The SVG transform string which can be directly used in the <code>transform</code> attribute of a <code>&lt;g&gt;</code> element to scale and position character path strings in SVG.</li>
      </ul>
    </div>
  </div>
</div>
